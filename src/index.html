<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' data:; script-src 'self' https://cdn.jsdelivr.net; style-src 'self' https://cdn.jsdelivr.net 'unsafe-inline'; img-src 'self' data: https://tile.openstreetmap.org https://a.tile.openstreetmap.org https://b.tile.openstreetmap.org https://c.tile.openstreetmap.org https://a.basemaps.cartocdn.com https://b.basemaps.cartocdn.com https://c.basemaps.cartocdn.com; connect-src 'self' http://localhost:4799 http://localhost:5000 https://router.project-osrm.org https://tile.openstreetmap.org https://a.tile.openstreetmap.org https://b.tile.openstreetmap.org https://c.tile.openstreetmap.org https://a.basemaps.cartocdn.com https://b.basemaps.cartocdn.com https://c.basemaps.cartocdn.com;">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="./styles.css" />
  <title>Padondep - Login</title>
</head>
<body>

  <main class="app-main container py-5">
    <div id="login-screen" class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6 col-xxl-5">
        <div class="login-card">

          <button id="login-close" class="btn-close-card" type="button" aria-label="Cerrar">√ó</button>

          <div class="text-center mb-4">
            <div class="brand-icon mb-3"></div>
            <div class="brand-name">Pa d√≥nde</div>
            <h2 class="h1 welcome-heading">Pa d√≥nde</h2>
            <p class="aux mb-4">Inicia sesi√≥n para acceder al mapa de transporte</p>
          </div>

          <form id="login-form">
            <div class="mb-3">
              <label for="login-email" class="form-label">Correo</label>
              <input type="email" class="form-control form-control-lg" id="login-email" placeholder="Ingresa tu correo electr√≥nico" required>
            </div>

            <div class="mb-4">
              <label for="login-password" class="form-label">Contrase√±a</label>
              <input type="password" class="form-control form-control-lg" id="login-password" placeholder="Ingresa tu contrase√±a" required>
            </div>

            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">Iniciar sesi√≥n</button>
            </div>
          </form>

          <p class="aux small text-center mt-3 mb-1">¬øNo tienes cuenta? <a href="#" id="show-register">Reg√≠strate</a></p>
        </div>
      </div>
    </div>

    <!-- Pantalla de registro (oculta por defecto) -->
    <div id="register-screen" style="display:none;" class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6 col-xxl-5">
        <div class="login-card register-card">
          <button id="register-back" class="btn-back-card" type="button" aria-label="Atr√°s">‚üµ Atr√°s</button>

          <div class="text-center mb-4">
            <div class="brand-icon mb-3"></div>
            <div class="brand-name">Pa d√≥nde</div>
            <h2 class="h1 welcome-heading">Pa d√≥nde</h2>
            <p class="aux mb-4">Crear usuario</p>
          </div>

          <form id="register-form">
            <div class="mb-3">
              <label for="reg-name" class="form-label">Nombre</label>
              <input type="text" class="form-control form-control-lg" id="reg-name" placeholder="Ingresa tu Nombre" required>
            </div>

            <div class="mb-3">
              <label for="reg-lastname" class="form-label">Apellido</label>
              <input type="text" class="form-control form-control-lg" id="reg-lastname" placeholder="Ingresa tu apellido">
            </div>

            <div class="mb-3">
              <label for="reg-email" class="form-label">Correo</label>
              <input type="email" class="form-control form-control-lg" id="reg-email" placeholder="Ingresa tu correo electr√≥nico" required>
            </div>

            <div class="mb-3">
              <label for="reg-password" class="form-label">Crear Contrase√±a</label>
              <input type="password" class="form-control form-control-lg" id="reg-password" placeholder="Ingresa tu contrase√±a" required>
            </div>

            <div class="mb-4">
              <label for="reg-password-confirm" class="form-label">Confirmar Contrase√±a</label>
              <input type="password" class="form-control form-control-lg" id="reg-password-confirm" placeholder="Ingresa tu contrase√±a" required>
            </div>

            <div class="d-grid">
              <button id="register-save" type="submit" class="btn btn-success btn-lg">Guardar</button>
            </div>
          </form>

        </div>
      </div>
    </div>

    <!-- Pantalla de mapa (oculta hasta el login) -->
	<div id="map-screen" style="display:none;" class="map-view with-side-panel">
      <header class="map-header">
        <div class="header-left">
          <button id="layout-menu" class="icon-button" type="button" aria-label="Abrir men√∫">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <div class="brand-stack">
            <div class="brand-logo-icon">Pd</div>
            <div class="brand-text">
              <div class="brand-title">Pa d√≥nde</div>
              <div class="brand-subtitle">Planificador de rutas</div>
            </div>
          </div>
        </div>
        <button id="btn-logout" class="btn btn-light btn-sm shadow-sm">Cerrar sesi√≥n</button>
      </header>

      <div class="map-body">
        <aside id="side-panel" class="side-panel">
          <div class="side-card mb-3">
            <div class="side-title">Buscar ubicaci√≥n</div>
            <div class="input-group input-group-sm">
              <input type="text" id="search-input" class="form-control" placeholder="Buscar lugar en Playa del Carmen" disabled>
              <button class="btn btn-outline-secondary" type="button" disabled>üîç</button>
            </div>
          </div>

          <div class="side-card">
            <div class="side-title">Planificar ruta</div>
            <div class="mb-2 small text-muted">Origen:</div>
            <div class="d-flex gap-2 mb-3">
              <input id="origin-input" class="form-control form-control-sm" placeholder="Selecciona en el mapa" disabled>
              <button id="btn-select-origin" class="btn btn-sm btn-outline-primary" type="button">Seleccionar origen</button>
            </div>

            <div class="mb-2 small text-muted">Destino:</div>
            <div class="d-flex gap-2 mb-3">
              <input id="dest-input" class="form-control form-control-sm" placeholder="Selecciona en el mapa" disabled>
              <button id="btn-select-dest" class="btn btn-sm btn-outline-primary" type="button">Seleccionar destino</button>
            </div>

            <button id="btn-calc-route" class="btn btn-success w-100" type="button" disabled>Calcular Ruta</button>
            <div id="route-info" class="mt-2 small text-muted">Distancia: 0 m</div>
          </div>

          <div class="side-card">
            <div class="side-title">Rutas guardadas</div>
            <div class="mb-2">
              <input id="route-name-input" class="form-control form-control-sm" placeholder="Nombre de la ruta">
            </div>
            <div class="d-grid gap-2 mb-3">
              <button id="btn-save-route" class="btn btn-primary btn-sm" type="button">Guardar ruta</button>
              <button id="btn-refresh-routes" class="btn btn-outline-light btn-sm" type="button">Actualizar lista</button>
            </div>
            <ul id="routes-list" class="routes-list list-unstyled small mb-0"></ul>
            <div class="text-muted extra-hint">Selecciona origen/destino o dibuja para guardar coordenadas.</div>
          </div>
        </aside>

        <section class="map-wrapper">
          <div class="map-controls">
            <button id="locate-btn" class="btn btn-light btn-sm shadow-sm">Ubicar</button>
          </div>
          <div id="map" class="map-frame"></div>
        </section>
      </div>

      <div id="account-drawer" class="account-drawer" aria-hidden="true">
        <div id="account-drawer-backdrop" class="account-drawer__backdrop" role="presentation"></div>
        <section class="account-drawer__panel" role="dialog" aria-modal="true" aria-label="Configuraci√≥n de la cuenta">
          <header class="account-drawer__header">
            <div>
              <p class="drawer-kicker">Configuraci√≥n</p>
              <h2 class="drawer-title">Pa d√≥nde</h2>
            </div>
            <button id="account-drawer-close" class="icon-button icon-button--solid" type="button" aria-label="Cerrar panel">
              <span></span>
              <span></span>
            </button>
          </header>

          <div class="account-drawer__grid">
            <nav class="settings-nav" aria-label="Secciones de configuraci√≥n">
              <button class="settings-nav-btn active" type="button">Configuraci√≥n de la cuenta</button>
              <button class="settings-nav-btn" type="button" disabled>Configuraci√≥n de la aplicaci√≥n</button>
              <button class="settings-nav-btn" type="button" disabled>Configuraci√≥n de administrador</button>
            </nav>

            <div class="settings-panel" id="account-settings-panel">
              <div class="settings-panel__header">
                <h3>Informaci√≥n de la cuenta</h3>
                <p class="settings-panel__hint">Actualiza tus datos b√°sicos y gestiona la seguridad.</p>
              </div>

              <form class="account-info-form" autocomplete="off">
                <label class="account-info-field">
                  <span>Nombre</span>
                  <input id="account-first-name" type="text" readonly>
                </label>
                <label class="account-info-field">
                  <span>Apellido paterno</span>
                  <input id="account-lastname-1" type="text" readonly>
                </label>
                <label class="account-info-field">
                  <span>Apellido materno</span>
                  <input id="account-lastname-2" type="text" readonly>
                </label>
                <label class="account-info-field">
                  <span>Correo electr√≥nico</span>
                  <input id="account-email" type="email" readonly>
                </label>
              </form>

              <div class="settings-actions">
                <button id="toggle-password-form" class="linkish-btn" type="button">Cambiar contrase√±a</button>
                <button id="delete-account-btn" class="danger-link" type="button">Eliminar cuenta</button>
              </div>

              <form id="account-password-form" class="password-form is-hidden" autocomplete="off">
                <div class="password-grid">
                  <label>
                    <span>Contrase√±a actual</span>
                    <input id="current-password" type="password" autocomplete="current-password" required>
                  </label>
                  <label>
                    <span>Nueva contrase√±a</span>
                    <input id="new-password" type="password" autocomplete="new-password" required>
                  </label>
                  <label>
                    <span>Confirmar nueva contrase√±a</span>
                    <input id="confirm-password" type="password" autocomplete="new-password" required>
                  </label>
                </div>
                <div class="password-form__footer">
                  <p id="password-feedback" class="password-feedback" role="status"></p>
                  <div class="password-form__actions">
                    <button id="password-cancel" class="btn btn-outline-light btn-sm" type="button">Cancelar</button>
                    <button id="password-submit-btn" class="btn btn-success btn-sm" type="submit">Guardar cambios</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Leaflet JS -->
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="./config.js"></script>
  <script src="./renderer.js"></script>
</body>
</html>